<div class="container mt-5">
    <h2>Carrito de Compras - Libros</h2>
    <table class="table table-hover mt-4">
        <thead class="table-dark">
            <tr>
                <th>Título</th>
                <th>Autor</th>
                <th>Precio</th>
                <th>Cantidad</th>
                <th>Subtotal</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of carrito">
                <td>{{ item.title }}</td>
                <td>{{ item.author }}</td>
                <td>{{ item.price }}</td> 
                <td><input type="number" [(ngModel)]="item.cantidad" class="form-control" style="width: 80px;"></td>
                <td>{{ item.price * item.cantidad }}</td> 
                <td><span class="remove-item" (click)="eliminarProducto(item.id)">Eliminar</span></td>
            </tr>
        </tbody>
    </table>

    <div class="mt-4">
        <p class="total-summary">Total: {{ total }}</p> 
        <button class="checkout-btn btn btn-success" (click)="abrirModal()">Proceder al Pago</button>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="pagoModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalLabel">Confirmación de Pago</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>El total a pagar es: <strong>{{ total }}</strong></p>
        <p>¿Deseas proceder con el pago?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="confirmarPago()">Confirmar Pago</button>
      </div>
    </div>
  </div>
</div>
