<div class="container mt-5"></div>
<h2>Catálogo de Libros</h2>

<!-- Filtros -->
<div class="filters mt-4">
  <div class="form-group">
    <label for="categoria">Filtrar por categoría:</label>
    <select id="categoria" [(ngModel)]="categoriaSelecc" class="form-control" (change)="aplicarFiltros()">
      <option value="">Todas</option>
      <ng-container *ngFor="let categoria of getCategorias(); let i = index">
        <option [value]="categoria">{{ categoria }}</option>
      </ng-container>
    </select>
    
    
  </div>

  <div class="form-group mt-3">
    <label for="precioMin">Precio mínimo:</label>
    <input type="number" id="precioMin" [(ngModel)]="precioMin" class="form-control" (input)="aplicarFiltros()">
  </div>

  <div class="form-group mt-3">
    <label for="precioMax">Precio máximo:</label>
    <input type="number" id="precioMax" [(ngModel)]="precioMax" class="form-control" (input)="aplicarFiltros()">
  </div>
</div>

<table class="table table-hover" style="width: 100%; border-collapse: collapse; font-family: Arial, sans-serif;">
  <thead style="background-color: #343a40; color: white;">
    <tr>
      <th style="padding: 12px; border-bottom: 2px solid #ddd;">Nombre</th>
      <th style="padding: 12px; border-bottom: 2px solid #ddd;">Descripción</th>
      <th style="padding: 12px; border-bottom: 2px solid #ddd;">Género</th>
      <th style="padding: 12px; border-bottom: 2px solid #ddd;">Año</th>
      <th style="padding: 12px; border-bottom: 2px solid #ddd;">Stock</th>
      <th style="padding: 12px; border-bottom: 2px solid #ddd;">Acciones</th>
    </tr>
  </thead>

  @for(item of productosFiltrados; track item) {
    <tbody>
      <tr style="border-bottom: 1px solid #ddd; text-align: left;">
        <td style="padding: 10px;">{{ item.title }}</td>
        <td style="padding: 10px;">{{ item.author }}</td>
        <td style="padding: 10px;">{{ item.genre }}</td>
        <td style="padding: 10px;">{{ item.year }}</td>
        <td style="padding: 10px;">{{ item.stock }}</td>
        <td>
          <button type="submit" class="btn btn-primary" (click)="addToCart(item)">Añadir al carrito</button>
        </td>
      </tr>
    </tbody>
  }
</table>
